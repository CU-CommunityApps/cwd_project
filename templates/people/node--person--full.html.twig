{% extends "node.html.twig" %}
{% block content %}
<div class="cwd-component cwd-basic cwd-people full flex-grid">

  <div class="flex-8">
    {% if node.field_destination_url.value -%}
    <div class="field-destination high-margin">
      <p><strong class="tutorial note">Note:</strong> This person profile features content from another page. <a href="{{ node.field_destination_url.0.url }}">View the featured content</a> for this person.</p>
    </div>
    {% endif %}
    <div class="field-body double-margin">
      {{ node.body|view('full') }}
    </div>
    {{ content|without('body','field_destination_url','field_image','field_email','field_phone') }}
  </div>

  <div class="flex-4 content-sidebar">
    {% if node.field_image.0.value -%}
      {% set image_mid = node.field_image.0.entity.mid.value %}
      <figure>
        {{ drupal_entity('media', image_mid, 'medium_sized') }}
      </figure>
    {% else -%}
      <figure><img src="/themes/custom/cwd_base/images/cwd_utilities/photo_placeholder_square.svg" alt=""></figure>
    {% endif %}

    {% if node.field_email.value or node.field_phone.value or node.field_location.value -%}
      <h2>Contact</h2>
      <div class="contact double-margin">
        {% if node.field_email.value -%}
          <div class="field-email">
            {%- set email_string = node.field_email.value -%}
            <a class="link-email" href="mailto:{{ email_string }}"><span class="fa fa-envelope-square"></span><span class="deco">{{ email_string }}</span></a>
          </div>
        {% endif %}
        {% if node.field_phone.value -%}
          <div class="field-phone">
            {%- set phone_string = node.field_phone.value -%}
            <a class="link-phone" href="tel:+1-{{ phone_string }}"><span class="fa fa-phone-square"></span><span class="deco">{{ phone_string }}</span></a>
          </div>
        {% endif %}
        {# TO DO: maybe replace plain text field_location with formatted text field...? #}
        {% if node.field_location.value -%}
          <div class="field-location">{{- node.field_location.value -}}</div>
        {% endif %}
      </div>
    {% endif %}
  </div>

{#
<ul class="custom inline no-bullet">
  <li class="category">
    <h4 class="sr-only">Job Category</h4>
    <span class="field-emphasize">Dog</span>
    <span class="field-emphasize">Visionary</span>
  </li>
  <li class="email">
    {%- if node.field_email.value -%}
      {% set email_markup = "Email<span class=\"sr-only\"> " ~ node.title.value ~ "</span>" %}
      {% set email_link = "mailto:" ~ node.field_email.value %}
      {{ link(email_markup|t, email_link, { 'class':['link-email']}) }}
    {%- endif -%}
  </li>
</ul>

<ul class="custom inline no-bullet">
  <li class="category">
    <h4 class="sr-only">Job Category</h4>
    <a href="#">Researcher</a>
    <span class="affiliation">Cornell University</span>
  </li>
  <li class="email">
    <a class="link-email" href="mailto:melissa.hines@cornell.edu">Email<span class="sr-only"> Melissa Hines</span></a>
  </li>
<!--
  <li class="phone">
    <a class="link-phone" href="tel:+1-607-255-5243">(607) 255-5243</a>
  </li>
-->
</ul>

 #}

</div>
{% endblock %}
